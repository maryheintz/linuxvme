#include <stdio.h>main() {   unsigned short *adr,dac,k;   int mode,abcd,ldac,value,scaler,fpmode,value;   int value1,value2,value3;loop:   printf(" enter operation number\n")   printf(" 0 - set a dac\n");   printf(" 1 - clear all scalers, trigger counter, and fifo\n");   printf(" 2 - enable scalers and trigger counter\n");   printf(" 3 - disable scalers and trigger counter\n");   printf(" 4 - read out a scaler\n");   printf(" 5 - read the trigger words\n");   printf(" 6 - select signals on front panel output lines\n");   printf(" 7 - exit\n");   fscanf)stdin,"%d",&mode);    if(mode == 0)       { printf(" enter [section ABCD] 0-A 1-C 2-B 3-D\n");         fscanf(stdin,"%d",&abcd);         printf(" enter [dac number] 0 to 23\n");         fscanf(stdin,"%d",&ldac);         printf(" enter [dac value] 0-1023\n");         fscanf(stdin,"%d",&dac);         printf(" abcd=%d  dac number=%d  dac value=%d\n",abcd,ldac,dac);         k = (abcd<<12) | dac;         adr = (unsigned short *)0xf0ff000a;         *adr = k;      /* latch dac value and abcd select */         k = (1<<ldac);         adr = (unsigned short *)0xf0ff000c;         *adr = k;  /* strobe dac line */         goto loop;       }    if(mode == 1)       { printf(" clearing scalers\n");         adr = (unsigned short *)0xf0ff0000;         *adr = 0;         goto loop;       }    if(mode == 2)       { printf(" enabling scalers\n");         adr = (unsigned short *)0xf0ff0004;         *adr = 0;         goto loop;       }    if(mode == 3)       { printf(" disabling scalers\n");         adr = (unsigned short *)0xf0ff0006;         *adr = 0;         goto loop;       }    if(mode == 4)       { printf(" select scalers  0-95=tower  96=trigger counter\n");         fscanf(stdin,"%d",&scaler);         adr = (unsigned short *)0xf0ff0008;         *adr = scaler;         adr = (unsigned short *)0xf0ff0002;         value = *adr;         print(" scaler %d value is %d\n",scaler,value);         goto loop;       }    if(mode == 5)       { printf(" trigger words\n");         adr = (unsigned short *)0xf0ff000e;         value1 =*adr;         adr = (unsigned short *)0xf0ff0010;         value2 =*adr;         adr = (unsigned short *)0xf0ff0012;         value3 =*adr;         printf("trig1=%x  trig2=%x  trig3=%x\n",value1,value2,value3);         goto loop;       }    if(mode == 6)       { printf(" select front panel output signals\n");         printf(" 0 - tst[7..0]\n");         printf(" 1 - tower[7..0]\n");         printf(" 2 - tower[15..8]\n");         printf(" 3 - tower[23..16]\n");         printf(" 4 - tower[31..24]\n");         printf(" 5 - tower[39..32]\n");         printf(" 6 - tower[47..40]\n");         printf(" 7 - tower[55..48]\n");         printf(" 8 - tower[63..56]\n");         printf(" 9 - tower[71..64]\n");         printf(" 10 - tower[79..72]\n");         printf(" 11 - tower[87..80]\n");         printf(" 12 - tower[95..88]\n");         printf(" 13 - tg[7..0]\n");         printf(" 14 - tg[15..8]\n");         printf(" 15 - tg[23..16]\n");         printf(" 16 - tg[31..24]\n");         printf(" 17 - tg[39..32]\n");         printf(" 18 - tg[47..40]\n");         fscanf(stdin,"%d",&fpmode);         adr = (unsigned short *)0xf0ff00014;         *adr = fpmode;         goto loop;       }    if(mode == 7) exit(0);    }  }            tsleep(0x80000020);      dac = 0xaaaa;      k = (abcd<<12) | dac;      printf(" set abcd and dac %x\n",k);      adr = (unsigned short *)0xf0ff000a;      *adr = k;      /* latch dac value and abcd select */      k = (1<<ldac);      printf(" set ldac=%d  k=%x\n",ldac,k);      adr = (unsigned short *)0xf0ff000c;      *adr = k;  /* strobe dac line */      tsleep(0x80000020);  if(sw(8) == 0) goto loop; }