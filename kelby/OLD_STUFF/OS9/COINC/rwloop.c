#include <stdio.h>main() {   unsigned long *adr,k;   int mode,abcd,ldac,dac,scaler,fpmode,count,ovfl,mv,sec;   unsigned long value,value1,value2,value3;   double fval;loop:   for(mv=5;mv<40;mv++)    { dac = mv*(4096.0/1240.0);      printf(" mv=%d    dac=%d\n",mv,dac);      for(abcd=0;abcd<4;abcd++)        { for(ldac=0;ldac<24;ldac++)           {  setdac(abcd,ldac,dac);           }        }      for(scaler=0;scaler<97;scaler++)          { adr = (unsigned long *)0x80ff0010;            *adr = scaler;            adr = (unsigned long *)0x80ff0004;            value = *adr;            count = value & 0x7ffff;            ovfl = (value>>19) & 1;            if(scaler<96) printf(" scaler %d value is %x  count=%d  ovfl=%d\n",             scaler,value,count,ovfl);            if(scaler==96) printf(" trgcnt %d value is %x  count=%d  ovfl=%d\n",             scaler,value,count,ovfl);          }     }  if(sw(1)==0) goto loop;  } setdac(abcd,ldac,dac) int abcd,ldac,dac;  { unsigned long k1,k2,*adr;/*  abcd 0=A  1=C  2=B  3=D  */    k1 = (abcd<<12) | dac;    adr = (unsigned long *)0x80ff0014;    *adr = k1;      /* latch dac value and abcd select */    k2 = (1<<ldac);    adr = (unsigned long *)0x80ff0018;    *adr = k2;  /* strobe dac line */  }